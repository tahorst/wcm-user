Timer unit: 1e-06 s

Total time: 0.001258 s
File: /home/travis/wcEcoli/models/ecoli/processes/transcript_elongation.py
Function: calculateRequest at line 76

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    76                                           	@line_profile
    77                                           	def calculateRequest(self):
    78                                           		# Calculate elongation rate based on the current media
    79         1          3.0      3.0      0.2  		current_media_id = self._external_states['Environment'].current_media_id
    80                                           
    81         1         44.0     44.0      3.5  		self.rnapElongationRate = self.rnaPolymeraseElongationRateDict[current_media_id].asNumber(units.nt / units.s)
    82                                           
    83         1          1.0      1.0      0.1  		self.elongation_rates = self.make_elongation_rates(
    84         1          1.0      1.0      0.1  			self.randomState,
    85         1          1.0      1.0      0.1  			self.rnapElongationRate,
    86         1          5.0      5.0      0.4  			self.timeStepSec(),
    87         1        428.0    428.0     34.0  			self.variable_elongation)
    88                                           
    89                                           		# If there are no active RNA polymerases, return immediately
    90         1          9.0      9.0      0.7  		if self.active_RNAPs.total_counts()[0] == 0:
    91                                           			return
    92                                           
    93                                           		# Determine total possible sequences of nucleotides that can be
    94                                           		# transcribed in this time step for each polymerase
    95         1          1.0      1.0      0.1  		TU_indexes, transcript_lengths = self.active_RNAPs.attrs(
    96         1        343.0    343.0     27.3  			'TU_index', 'transcript_length')
    97         1          1.0      1.0      0.1  		sequences = buildSequences(
    98         1          1.0      1.0      0.1  			self.rnaSequences,
    99         1          0.0      0.0      0.0  			TU_indexes,
   100         1          1.0      1.0      0.1  			transcript_lengths,
   101         1        175.0    175.0     13.9  			self.elongation_rates)
   102                                           
   103         1          2.0      2.0      0.2  		sequenceComposition = np.bincount(
   104         1        166.0    166.0     13.2  			sequences[sequences != polymerize.PAD_VALUE], minlength = 4)
   105                                           
   106                                           		# Calculate if any nucleotides are limited and request up to the number
   107                                           		# in the sequences or number available
   108         1          7.0      7.0      0.6  		ntpsTotal = self.ntps.total_counts()
   109         1         11.0     11.0      0.9  		maxFractionalReactionLimit = np.fmin(1, ntpsTotal / sequenceComposition)
   110         1          7.0      7.0      0.6  		self.ntps.requestIs(maxFractionalReactionLimit * sequenceComposition)
   111                                           
   112         1          1.0      1.0      0.1  		self.writeToListener(
   113         1         27.0     27.0      2.1  			"GrowthLimits", "ntpPoolSize", self.ntps.total_counts())
   114         1          1.0      1.0      0.1  		self.writeToListener(
   115         1          1.0      1.0      0.1  			"GrowthLimits", "ntpRequestSize",
   116         1         15.0     15.0      1.2  			maxFractionalReactionLimit * sequenceComposition)
   117                                           
   118                                           		# Request full access to active RNAPs
   119         1          6.0      6.0      0.5  		self.active_RNAPs.request_access(self.EDIT_DELETE_ACCESS)

